<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>DOM Event Architecture</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom: 3px solid #054572;
			border-bottom: 3px solid var(--toclink-underline);
			margin-bottom: -3px;
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 3383f409d, updated Fri Apr 28 15:49:22 2023 -0700" name="generator">
  <meta content="1e3661048fc06aed8eda5d4e4cb3ecf5f69c5475" name="document-revision">
<style>/* style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}
</style>
<style>/* style-colors */

/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}
</style>
<style>/* style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    white-space: pre;
    display: inline-block;
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: .5em;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
}

.dfn-paneled[role="button"] { cursor: pointer; }
</style>
<style>/* style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* style-selflinks */

:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* style-darkmode */

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}

@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
    }
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"></p>
   <h1>DOM Event Architecture</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">A Collection of Interesting Ideas, <time class="dt-updated" datetime="2024-06-21">21 June 2024</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/w3c/uievents/issues/">GitHub</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">No One</span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="http://creativecommons.org/publicdomain/zero/1.0/" rel="license"><img alt="CC0" height="15" src="https://licensebuttons.net/p/zero/1.0/80x15.png" width="80"></a> To the extent possible under law, the editors have waived all copyright
and related or neighboring rights to this work.
In addition, as of 21 June 2024,
the editors have made this specification available under the <a href="http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0" rel="license">Open Web Foundation Agreement Version 1.0</a>,
which is available at http://www.openwebfoundation.org/legal/the-owf-1-0-agreements/owfa-1-0.
Parts of this work may be from another specification document.  If so, those parts are instead covered by the license of that specification document. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This document provides a non-normative description of the DOM Event architecture.

        It was previously part of the UI Events spec.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#dom-event-architecture"><span class="secno">1</span> <span class="content">DOM Event Architecture</span></a>
     <ol class="toc">
      <li><a href="#event-flow"><span class="secno">1.1</span> <span class="content">Event dispatch and DOM event flow</span></a>
      <li><a href="#event-flow-default-cancel"><span class="secno">1.2</span> <span class="content">Default actions and cancelable events</span></a>
      <li><a href="#sync-async"><span class="secno">1.3</span> <span class="content">Synchronous and asynchronous events</span></a>
      <li><a href="#trusted-events"><span class="secno">1.4</span> <span class="content">Trusted events</span></a>
      <li><a href="#event-flow-activation"><span class="secno">1.5</span> <span class="content">Activation triggers and behavior</span></a>
      <li><a href="#event-constructors"><span class="secno">1.6</span> <span class="content">Constructing Mouse and Keyboard Events</span></a>
     </ol>
    <li><a href="#glossary"><span class="secno">2</span> <span class="content">Glossary</span></a>
    <li><a href="#conformance"><span class="secno"></span> <span class="content"> Conformance</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="dom-event-architecture"><span class="secno">1. </span><span class="content">DOM Event Architecture</span><a class="self-link" href="#dom-event-architecture"></a></h2>
    <p><em>This section is non-normative. Refer to <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> for a normative description
of the DOM event architecture</em></p>
    <p>This information in this document was previously included in the UIEvents spec, but
has been removed to this document so avoid confusion. As noted above, the proper
definitions are part of the <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> specification.</p>
    <h3 class="heading settled" data-level="1.1" id="event-flow"><span class="secno">1.1. </span><span class="content">Event dispatch and DOM event flow</span><a class="self-link" href="#event-flow"></a></h3>
    <p>This section gives a brief overview of the event <a data-link-type="dfn" href="#dispatch" id="ref-for-dispatch">dispatch</a> mechanism
    and describes how events propagate through the DOM tree. Applications can
    dispatch event objects using the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-dispatchevent" id="ref-for-dom-eventtarget-dispatchevent">dispatchEvent()</a></code> method, and
    the event object will propagate through the DOM tree as determined by the
    DOM event flow.</p>
    <figure id="figure-dom-event-flow">
      <img alt="Graphical representation of an event dispatched in a DOM tree using the DOM event flow" height="560" src="images/eventflow.svg"> 
     <figcaption>Graphical representation of an event dispatched in a DOM tree using the DOM event flow</figcaption>
    </figure>
    <p>Event objects are dispatched to an <a data-link-type="dfn" href="#event-target" id="ref-for-event-target">event target</a>. But before dispatch
    can begin, the event object’s <a data-link-type="dfn" href="#propagation-path" id="ref-for-propagation-path">propagation path</a> must first be
    determined.</p>
    <p>The <a data-link-type="dfn" href="#propagation-path" id="ref-for-propagation-path①">propagation path</a> is an ordered list of <a data-link-type="dfn" href="#current-event-target" id="ref-for-current-event-target">current event
    targets</a> through which the event passes. This propagation path reflects
    the hierarchical tree structure of the document. The last item in the list
    is the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target①">event target</a>, and the preceding items in the list are referred
    to as the <em>target’s ancestors</em>, with the immediately preceding item
    as the <em>target’s parent</em>.</p>
    <p>Once the <a data-link-type="dfn" href="#propagation-path" id="ref-for-propagation-path②">propagation path</a> has been determined, the event object
    passes through one or more <a data-link-type="dfn" href="#event-phase" id="ref-for-event-phase">event phases</a>. There are three event
    phases: <a data-link-type="dfn" href="#capture-phase" id="ref-for-capture-phase">capture phase</a>, <a data-link-type="dfn" href="#target-phase" id="ref-for-target-phase">target phase</a> and <a data-link-type="dfn" href="#bubble-phase" id="ref-for-bubble-phase">bubble phase</a>.
    Event objects complete these phases as described below. A phase will be
    skipped if it is not supported, or if the event object’s propagation has
    been stopped. For example, if the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-bubbles" id="ref-for-dom-event-bubbles">bubbles</a></code> attribute is set to
    false, the bubble phase will be skipped, and if <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-stoppropagation" id="ref-for-dom-event-stoppropagation">stopPropagation()</a></code> has been called prior to the dispatch, all phases will be skipped.</p>
    <ul>
     <li data-md>
      <p>The <strong>capture phase</strong>: The event object propagates
through the target’s ancestors from the <a data-link-type="dfn" href="#window" id="ref-for-window">Window</a> to the target’s
parent. This phase is also known as the <em>capturing phase</em>.</p>
     <li data-md>
      <p>The <strong>target phase</strong>: The event object arrives at the event
object’s <a data-link-type="dfn" href="#event-target" id="ref-for-event-target②">event target</a>. This phase is also known as the <em>at-target phase</em>. If the <a data-link-type="dfn" href="https://w3c.github.io/webdriver-bidi/#event-event-type" id="ref-for-event-event-type">event type</a> indicates that the
event doesn’t bubble, then the event object will halt after completion
of this phase.</p>
     <li data-md>
      <p>The <strong>bubble phase</strong>: The event object propagates through
the target’s ancestors in reverse order, starting with the target’s
parent and ending with the <a data-link-type="dfn" href="#window" id="ref-for-window①">Window</a>. This phase is also known as
the <em>bubbling phase</em>.</p>
    </ul>
    <h3 class="heading settled" data-level="1.2" id="event-flow-default-cancel"><span class="secno">1.2. </span><span class="content">Default actions and cancelable events</span><a class="self-link" href="#event-flow-default-cancel"></a></h3>
    <p>Events are typically dispatched by the implementation as a result of a user
    action, in response to the completion of a task, or to signal progress
    during asynchronous activity (such as a network request). Some events can be
    used to control the behavior that the implementation may take next (or undo
    an action that the implementation already took). Events in this category are
    said to be <em>cancelable</em> and the behavior they cancel is called their <em><a data-link-type="dfn" href="#default-action" id="ref-for-default-action">default action</a></em>. Cancelable event objects can be associated
    with one or more 'default actions'. To cancel an event, call the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault">preventDefault()</a></code> method.</p>
    <p class="example" id="example-76f5b225"><a class="self-link" href="#example-76f5b225"></a> A EVENT{mousedown} event is dispatched immediately after the user presses
    down a button on a pointing device (typically a mouse). One possible <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①">default action</a> taken by the implementation is to set up a state
    machine that allows the user to drag images or select text. The <a data-link-type="dfn" href="#default-action" id="ref-for-default-action②">default
    action</a> depends on what happens next — for example, if the user’s
    pointing device is over text, a text selection might begin. If the user’s
    pointing device is over an image, then an image-drag action could begin.
    Preventing the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action③">default action</a> of a EVENT{mousedown} event prevents
    these actions from occurring. </p>
    <p><a data-link-type="dfn" href="#default-action" id="ref-for-default-action④">Default actions</a> are usually performed after the event dispatch has
    been completed, but in exceptional cases they may also be performed
    immediately before the event is dispatched.</p>
    <p class="example" id="example-eadc7cc5"><a class="self-link" href="#example-eadc7cc5"></a> The default action associated with the EVENT{click} event on <code>&lt;input
    type="checkbox"></code> elements toggles the <code>checked</code> IDL
    attribute value of that element. If the EVENT{click} event’s default action
    is cancelled, then the value is restored to its former state. </p>
    <p>When an event is canceled, then the conditional <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑤">default actions</a> associated with the event is skipped (or as mentioned above, if the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑥">default actions</a> are carried out before the dispatch, their effect
    is undone). Whether an event object is cancelable is indicated by
    the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-cancelable" id="ref-for-dom-event-cancelable">cancelable</a></code> attribute. Calling <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault①">preventDefault()</a></code> stops all
    related <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑦">default actions</a> of an event object. The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-defaultprevented" id="ref-for-dom-event-defaultprevented">defaultPrevented</a></code> attribute indicates whether an event has already
    been canceled (e.g., by a prior <a data-link-type="dfn" href="#event-listener" id="ref-for-event-listener">event listener</a>). If the <a data-link-type="dfn" href="#dom-application" id="ref-for-dom-application">DOM
    application</a> itself initiated the dispatch, then the return value of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-dispatchevent" id="ref-for-dom-eventtarget-dispatchevent①">dispatchEvent()</a></code> method indicates whether the event object
    was cancelled.</p>
    <p class="note" role="note">Many implementations additionally interpret an <a data-link-type="dfn" href="#event-listener" id="ref-for-event-listener①">event
    listener</a>’s return value, such as the value <code>false</code>, to mean that
    the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑧">default action</a> of cancelable events will be cancelled (though <code>window.onerror</code> handlers are cancelled by returning <code>true</code>). </p>
    <h3 class="heading settled" data-level="1.3" id="sync-async"><span class="secno">1.3. </span><span class="content">Synchronous and asynchronous events</span><a class="self-link" href="#sync-async"></a></h3>
    <p>Events may be dispatched either synchronously or asynchronously.</p>
    <p>Events which are synchronous (<em><q>sync events</q></em>) are treated
    as if they are in a virtual queue in a first-in-first-out model, ordered by
    sequence of temporal occurrence with respect to other events, to changes in
    the DOM, and to user interaction.  Each event in this virtual queue is
    delayed until the previous event has completed its propagation behavior, or
    been canceled.  Some sync events are driven by a specific device or process,
    such as mouse button events. These events are governed by the <a data-link-type="dfn" href="#event-order" id="ref-for-event-order">event
    order</a> algorithms defined for that set of events, and user agents will
    dispatch these events in the defined order.</p>
    <p>Events which are asynchronous (<em><q>async events</q></em>) may be
    dispatched as the results of the action are completed, with no relation to
    other events, to other changes in the DOM, nor to user interaction.</p>
    <p class="example" id="example-6e6e7ff3"><a class="self-link" href="#example-6e6e7ff3"></a> During loading of a document, an inline script element is parsed and
    executed. The EVENT{load} event is queued to be fired
    asynchronously at the script element. However, because it is an async event,
    its order with relation to other synchronous events fired during document
    load (such as the <code class="eventtype">DOMContentLoaded</code> event from <a data-link-type="biblio" href="#biblio-html5" title="HTML5">[HTML5]</a>) is not guaranteed. </p>
    <h3 class="heading settled" data-level="1.4" id="trusted-events"><span class="secno">1.4. </span><span class="content">Trusted events</span><a class="self-link" href="#trusted-events"></a></h3>
    <p>Events that are generated by the <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent">user agent</a>, either as a result of user
    interaction, or as a direct result of changes to the DOM, are trusted by the <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent①">user agent</a> with privileges that are not afforded to events generated by
    script through the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-document-createevent" id="ref-for-dom-document-createevent">createEvent()</a></code> method, modified
    using the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-initevent" id="ref-for-dom-event-initevent">initEvent()</a></code> method, or dispatched via the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventtarget-dispatchevent" id="ref-for-dom-eventtarget-dispatchevent②">dispatchEvent()</a></code> method.  The <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted">isTrusted</a></code> attribute
    of trusted events has a value of <code>true</code>, while untrusted events
    have a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted①">isTrusted</a></code> attribute value of <code>false</code>.</p>
    <p>Most untrusted events will not trigger <a data-link-type="dfn" href="#default-action" id="ref-for-default-action⑨">default actions</a>, with the
    exception of the EVENT{click} event. This event always
    triggers the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①⓪">default action</a>, even if the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-istrusted" id="ref-for-dom-event-istrusted②">isTrusted</a></code> attribute is <code>false</code> (this behavior is retained for
    backward-compatibility). All other untrusted events behave as if the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault②">preventDefault()</a></code> method had been called on that event.</p>
    <h3 class="heading settled" data-level="1.5" id="event-flow-activation"><span class="secno">1.5. </span><span class="content">Activation triggers and behavior</span><a class="self-link" href="#event-flow-activation"></a></h3>
    <p>Certain <a data-link-type="dfn" href="#event-target" id="ref-for-event-target③">event targets</a> (such as a link or button element) may have
    associated <a data-link-type="dfn" href="#activation-behavior" id="ref-for-activation-behavior">activation behavior</a> (such as following a link) that
    implementations perform in response to an <em><a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger">activation
    trigger</a></em> (such as clicking a link).</p>
    <p class="example" id="example-activation"><a class="self-link" href="#example-activation"></a> Both HTML and SVG have an <code>&lt;a></code> element which indicates a
    link.  Relevant <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger①">activation triggers</a> for an <code>&lt;a></code> element are a EVENT{click} event on the text or image content
    of the <code>&lt;a></code> element, or a EVENT{keydown}
    event with a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-key" id="ref-for-dom-keyboardevent-key">key</a></code> attribute value of KEY{Enter} key when
    the <code>&lt;a></code> element has focus.  The activation behavior for
    an <code>&lt;a></code> element is normally to change the content of the
    window to the content of the new document, in the case of external links,
    or to reposition the current document relative to the new anchor, in the
    case of internal links. </p>
    <p>An <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger②">activation trigger</a> is a user action or an event which indicates
    to the implementation that an activation behavior should be initiated.
    User-initiated <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger③">activation triggers</a> include clicking a mouse button
    on an activatable element, pressing the KEYCAP{Enter} key when an activatable
    element has focus, or pressing a key that is somehow linked to an
    activatable element (a <q>hotkey</q> or <q>access key</q>) even when that
    element does not have focus.  Event-based <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger④">activation triggers</a> may
    include timer-based events that activate an element at a certain clock time
    or after a certain time period has elapsed, progress events after a certain
    action has been completed, or many other condition-based or state-based
    events.</p>
    <h3 class="heading settled" data-level="1.6" id="event-constructors"><span class="secno">1.6. </span><span class="content">Constructing Mouse and Keyboard Events</span><a class="self-link" href="#event-constructors"></a></h3>
    <p>Generally, when a constructor of an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event">Event</a></code> interface, or of an interface
    inherited from the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event①">Event</a></code> interface, is invoked, the steps described in <a data-link-type="biblio" href="#biblio-dom" title="DOM Standard">[DOM]</a> should be followed. However the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent">KeyboardEvent</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent">MouseEvent</a></code> interfaces provide additional dictionary members for
    initializing the internal state of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event②">Event</a></code> object’s key modifiers:
    specifically, the internal state queried for using the <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-keyboardevent-getmodifierstate" id="ref-for-dom-keyboardevent-getmodifierstate">getModifierState()</a></code> and <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dom-mouseevent-getmodifierstate" id="ref-for-dom-mouseevent-getmodifierstate">getModifierState()</a></code> methods. This section supplements the DOM4 steps for intializing a new <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event③">Event</a></code> object with these optional modifier states.</p>
    <p>For the purposes of constructing a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent①">KeyboardEvent</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent①">MouseEvent</a></code>, or
    object derived from these objects using the algorithm below, all <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent②">KeyboardEvent</a></code>, <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent②">MouseEvent</a></code>, and derived objects have <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="internal-key-modifier-state">internal key modifier state</dfn> which can be set and
    retrieved using the key modifier names described in the <a href="http://www.w3.org/TR/uievents-key/#keys-modifier">Modifier Keys table</a> in <a data-link-type="biblio" href="#biblio-uievents-key" title="UI Events KeyboardEvent key Values">[UIEvents-Key]</a>.</p>
    <p>The following steps supplement the algorithm defined for constructing
    events in DOM4:</p>
    <ul>
     <li data-md>
      <p>If the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event④">Event</a></code> being constructed is a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#keyboardevent" id="ref-for-keyboardevent③">KeyboardEvent</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#mouseevent" id="ref-for-mouseevent③">MouseEvent</a></code> object or an object that derives from either of these,
and a <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dictdef-eventmodifierinit" id="ref-for-dictdef-eventmodifierinit">EventModifierInit</a></code> argument was provided to the constructor,
then run the following sub-steps:</p>
      <ul>
       <li data-md>
        <p>For each <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/uievents/#dictdef-eventmodifierinit" id="ref-for-dictdef-eventmodifierinit①">EventModifierInit</a></code> argument, if the dictionary member
begins with the string <code>"modifier"</code>, then let the <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="modifier-key-name">key modifier name</dfn> be the
dictionary member’s name excluding the prefix <code>"modifier"</code>, and set the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#event" id="ref-for-event⑤">Event</a></code> object’s <a href="#internal-key-modifier-state" id="ref-for-internal-key-modifier-state">internal key modifier state</a> that matches the <a href="#modifier-key-name" id="ref-for-modifier-key-name">key modifier name</a> to the corresponding value.</p>
      </ul>
    </ul>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="glossary"><span class="secno">2. </span><span class="content">Glossary</span><a class="self-link" href="#glossary"></a></h2>
    <p>Some of the following term definitions have been borrowed or modified from
similar definitions in other W3C or standards documents. See the links within
the definitions for more information.</p>
    <dl>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activation-behavior">activation behavior</dfn>
     <dd data-md>
      <p>The action taken when an <a data-link-type="dfn" href="#event" id="ref-for-event⑥">event</a>, typically initiated by users through
an input device, causes an element to fulfill a defined task.  The task MAY
be defined for that element by the <a data-link-type="dfn" href="#host-language" id="ref-for-host-language">host language</a>, or by
author-defined variables, or both.  The default task for any given element
MAY be a generic action, or MAY be unique to that element.  For example, the
activation behavior of an HTML or SVG <code>&lt;a></code> element is to
cause the <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent②">user agent</a> to traverse the link specified in the <code>href</code> attribute, with the further optional parameter of
specifying the browsing context for the traversal (such as the current
window or tab, a named window, or a new window). The activation behavior of
an HTML <code>&lt;input></code> element with the <code>type</code> attribute value <code>submit</code> is be to send the values of the form
elements to an author-defined IRI by the author-defined HTTP method.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="activation-trigger">activation trigger</dfn>
     <dd data-md>
      <p>An event which is defined to initiate an <a data-link-type="dfn" href="#activation-behavior" id="ref-for-activation-behavior①">activation behavior</a>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="bubble phase|bubbling phase" data-noexport id="bubble-phase">bubbling phase</dfn>
     <dd data-md>
      <p>The process by which an <a data-link-type="dfn" href="#event" id="ref-for-event⑦">event</a> can be handled by one of the target’s
ancestors <em>after</em> being handled by the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target④">event target</a>. See the
description of the <a data-link-type="dfn" href="#bubble-phase" id="ref-for-bubble-phase①">bubble phase</a> in the context of event flow for more
details.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="capture-phase">capture phase</dfn>
     <dd data-md>
      <p>The process by which an <a data-link-type="dfn" href="#event" id="ref-for-event⑧">event</a> can be handled by one of the target’s
ancestors <em>before</em> being handled by the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target⑤">event target</a>. See the
description of the <a href="#capture-phase" id="ref-for-capture-phase②">capture phase</a> in the context
of event flow for more details.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="current-event-target">current event target</dfn>
     <dd data-md>
      <p>In an event flow, the current event target is the object associated with the <a data-link-type="dfn" href="#event-handler" id="ref-for-event-handler">event handler</a> that is currently being dispatched. This object MAY be
the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target⑥">event target</a> itself or one of its ancestors. The current event
target changes as the <a data-link-type="dfn" href="#event" id="ref-for-event⑨">event</a> propagates from object to object through
the various <a data-link-type="dfn" href="#phase" id="ref-for-phase">phases</a> of the event flow. The current event target is the
value of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-currenttarget" id="ref-for-dom-event-currenttarget">currentTarget</a></code> attribute.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="default-action">default action</dfn>
     <dd data-md>
      <p>A <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①①">default action</a> is an OPTIONAL supplementary behavior that an
implementation MUST perform in combination with the dispatch of the event
object.  Each event type definition, and each specification, defines the <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①②">default action</a> for that event type, if it has one.  An instance of an
event MAY have more than one <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①③">default action</a> under some circumstances,
such as when associated with an <a data-link-type="dfn" href="#activation-trigger" id="ref-for-activation-trigger⑤">activation trigger</a>.  A <a data-link-type="dfn" href="#default-action" id="ref-for-default-action①④">default
action</a> MAY be cancelled through the invocation of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-preventdefault" id="ref-for-dom-event-preventdefault③">preventDefault()</a></code> method.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dispatch">dispatch</dfn>
     <dd data-md>
      <p>To create an event with attributes and methods appropriate to its type and
context, and propagate it through the DOM tree in the specified manner.
Interchangeable with the term <q><a data-link-type="dfn" href="#fire" id="ref-for-fire">fire</a></q>, e.g., <q>fire a
EVENT{click} event</q> or <q>dispatch a EVENT{load} event</q>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="document">document</dfn>
     <dd data-md>
      <p>An object instantiating the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document">Document</a></code> interface <a data-link-type="biblio" href="#biblio-dom-level-3-core" title="Document Object Model (DOM) Level 3 Core Specification">[DOM-Level-3-Core]</a>,
representing the entire HTML or XML text document.  Conceptually, it is the
root of the document tree, and provides the primary access to the document’s
data.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="dom-application">DOM application</dfn>
     <dd data-md>
      <p>A DOM application is script or code, written by a content author or
automatically generated, which takes advantage of the interfaces, methods,
attributes, events, and other features described in this specification in
order to make dynamic or interactive content, such as Web applications,
exposed to users in a <a data-link-type="dfn" href="#user-agent" id="ref-for-user-agent③">user agent</a>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event">event</dfn>
     <dd data-md>
      <p>An event is the representation of some occurrence (such as a mouse click on
the presentation of an element, the removal of child node from an element,
or any number of other possibilities) which is associated with its <a data-link-type="dfn" href="#event-target" id="ref-for-event-target⑦">event
target</a>. Each event is an instantiation of one specific <a data-link-type="dfn" href="https://w3c.github.io/webdriver-bidi/#event-event-type" id="ref-for-event-event-type①">event
type</a>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-handler">event handler</dfn>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-listener">event listener</dfn>
     <dd data-md>
      <p>An object that implements the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener">EventListener</a></code> interface and provides an <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventlistener-handleevent" id="ref-for-dom-eventlistener-handleevent">handleEvent()</a></code> callback method. Event handlers are
language-specific. Event handlers are invoked in the context of a particular
object (the <a data-link-type="dfn" href="#current-event-target" id="ref-for-current-event-target①">current event target</a>) and are provided with the event
object itself.</p>
      <p class="note" role="note"> In JavaScript, user-defined functions are considered to implement the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener①">EventListener</a></code> interface. Thus the event object will be provided as the
first parameter to the user-defined function when it is invoked.
Additionally, JavaScript objects can also implement the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#callbackdef-eventlistener" id="ref-for-callbackdef-eventlistener②">EventListener</a></code> interface when they define a <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-eventlistener-handleevent" id="ref-for-dom-eventlistener-handleevent①">handleEvent()</a></code> method. </p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-order">event order</dfn>
     <dd data-md>
      <p>The sequence in which events from the same event source or process occur,
using the same or related event interfaces. For example, in an environment
with a mouse, a track pad, and a keyboard, each of those input devices would
constitute a separate event source, and each would follow its own event
order. A EVENT{mousedown} event from the trackpad followed by a
EVENT{mouseup} event from the mouse would not result in a EVENT{click} event.</p>
      <p class="note" role="note"> There can be interactions between different event orders. For example, a
EVENT{click} event might be modified by a concurrent EVENT{keydown} event
(e.g., via KEYCAP{Shift}<code>+</code>EVENT{click}). However, the event
orders of these different event sources would be distinct. </p>
      <p>The event order of some interfaces are device-independent. For example, a
user might change focus using the KEYCAP{Tab} key, or by clicking the new
focused element with the mouse.  The event order in such cases depends on
the state of the process, not on the state of the device that initiates the
state change.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-phase">event phase</dfn>
     <dd data-md>
      <p>See <a data-link-type="dfn" href="#phase" id="ref-for-phase①">phase</a>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="event-target">event target</dfn>
     <dd data-md>
      <p>The object to which an <a data-link-type="dfn" href="#event" id="ref-for-event①⓪">event</a> is targeted using the event flow.
The event target is the value of the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-target" id="ref-for-dom-event-target">target</a></code> attribute.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="fire">fire</dfn>
     <dd data-md>
      <p>A synonym for <a data-link-type="dfn" href="#dispatch" id="ref-for-dispatch①">dispatch</a>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="host-language">host language</dfn>
     <dd data-md>
      <p>Any language which integrates the features of another language or API
specification, while normatively referencing the origin specification rather
than redefining those features, and extending those features only in ways
defined by the origin specification.  An origin specification typically is
only intended to be implemented in the context of one or more host
languages, not as a standalone language.  For example, XHTML, HTML, and SVG
are host languages for UI Events, and they integrate and extend the objects
and models defined in this specification.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="phase">phase</dfn>
     <dd data-md>
      <p>In the context of <a data-link-type="dfn" href="#event" id="ref-for-event①①">events</a>, a phase is set of logical traversals from
node to node along the DOM tree, from the <a data-link-type="dfn" href="#window" id="ref-for-window②">Window</a> to the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#document" id="ref-for-document①">Document</a></code> object, <a data-link-type="dfn" href="https://drafts.csswg.org/css-display-4/#root-element" id="ref-for-root-element">root element</a>, and down to the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target⑧">event target</a> (<a data-link-type="dfn" href="#capture-phase" id="ref-for-capture-phase①">capture
phase</a>), at the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target⑨">event target</a> itself (<a data-link-type="dfn" href="#target-phase" id="ref-for-target-phase①">target phase</a>), and
back up the same chain (<a data-link-type="dfn" href="#bubble-phase" id="ref-for-bubble-phase②">bubbling phase</a>).</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="propagation-path">propagation path</dfn>
     <dd data-md>
      <p>The ordered set of <a data-link-type="dfn" href="#current-event-target" id="ref-for-current-event-target②">current event targets</a> though which an <a data-link-type="dfn" href="#event" id="ref-for-event①②">event</a> object will pass sequentially on the way to and back from the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target①⓪">event
target</a>.  As the event propagates, each <a data-link-type="dfn" href="#current-event-target" id="ref-for-current-event-target③">current event target</a> in
the propagation path is in turn set as the <code class="idl"><a data-link-type="idl" href="https://dom.spec.whatwg.org/#dom-event-currenttarget" id="ref-for-dom-event-currenttarget①">currentTarget</a></code>. The
propagation path is initially composed of one or more <a data-link-type="dfn" href="#event-phase" id="ref-for-event-phase①">event phases</a> as
defined by the <a data-link-type="dfn" href="https://w3c.github.io/webdriver-bidi/#event-event-type" id="ref-for-event-event-type②">event type</a>, but MAY be interrupted.  Also known as an <em>event target chain</em>.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="target-phase">target phase</dfn>
     <dd data-md>
      <p>The process by which an <a data-link-type="dfn" href="#event" id="ref-for-event①③">event</a> can be handled by the <a data-link-type="dfn" href="#event-target" id="ref-for-event-target①①">event
target</a>. See the description of the <a data-link-type="dfn" href="#target-phase" id="ref-for-target-phase②">target phase</a> in the context of
event flow for more details.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="user-agent">user agent</dfn>
     <dd data-md>
      <p>A program, such as a browser or content authoring tool, normally running on
a client machine, which acts on a user’s behalf in retrieving, interpreting,
executing, presenting, or creating content.  Users MAY act on the content
using different user agents at different times, for different purposes.</p>
     <dt data-md><dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport id="window">Window</dfn>
     <dd data-md>
      <p>The <code>Window</code> is the object referred to by the current <a data-link-type="dfn" href="#document" id="ref-for-document②">document</a>’s
browsing context’s Window Proxy object as defined in <a href="http://dev.w3.org/html5/spec/single-page.html#windowproxy" title="HTML5 WindowProxy description">HTML5</a> <a data-link-type="biblio" href="#biblio-html5" title="HTML5">[HTML5]</a>.</p>
    </dl>
   </section>
  </main>
  <div data-fill-with="conformance">
   <h2 class="no-ref no-num heading settled" id="conformance"><span class="content"> Conformance</span><a class="self-link" href="#conformance"></a></h2>
   <p> Conformance requirements are expressed with a combination of descriptive assertions and RFC 2119 terminology.
            The key words “MUST”, “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”, and “OPTIONAL”
            in the normative parts of this document
            are to be interpreted as described in RFC 2119.
            However, for readability,
            these words do not appear in all uppercase letters in this specification. </p>
   <p> All of the text of this specification is normative
            except sections explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">[RFC2119]</a> </p>
   <p> Examples in this specification are introduced with the words “for example”
            or are set apart from the normative text with <code>class="example"</code>, like this: </p>
   <div class="example" id="example-example"><a class="self-link" href="#example-example"></a> This is an example of an informative example. </div>
   <p> Informative notes begin with the word “Note”
            and are set apart from the normative text with <code>class="note"</code>, like this: </p>
   <p class="note" role="note"> Note, this is an informative note.</p>
  </div>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don’t scroll to compensate for the ToC if we’re above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don’t know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn’t exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn’t standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don’t have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we’re at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can’t find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#activation-behavior">activation behavior</a><span>, in § 2</span>
   <li><a href="#activation-trigger">activation trigger</a><span>, in § 2</span>
   <li><a href="#bubble-phase">bubble phase</a><span>, in § 2</span>
   <li><a href="#bubble-phase">bubbling phase</a><span>, in § 2</span>
   <li><a href="#capture-phase">capture phase</a><span>, in § 2</span>
   <li><a href="#current-event-target">current event target</a><span>, in § 2</span>
   <li><a href="#default-action">default action</a><span>, in § 2</span>
   <li><a href="#dispatch">dispatch</a><span>, in § 2</span>
   <li><a href="#document">document</a><span>, in § 2</span>
   <li><a href="#dom-application">DOM application</a><span>, in § 2</span>
   <li><a href="#event">event</a><span>, in § 2</span>
   <li><a href="#event-handler">event handler</a><span>, in § 2</span>
   <li><a href="#event-listener">event listener</a><span>, in § 2</span>
   <li><a href="#event-order">event order</a><span>, in § 2</span>
   <li><a href="#event-phase">event phase</a><span>, in § 2</span>
   <li><a href="#event-target">event target</a><span>, in § 2</span>
   <li><a href="#fire">fire</a><span>, in § 2</span>
   <li><a href="#host-language">host language</a><span>, in § 2</span>
   <li><a href="#internal-key-modifier-state">internal key modifier state</a><span>, in § 1.6</span>
   <li><a href="#modifier-key-name">key modifier name</a><span>, in § 1.6</span>
   <li><a href="#phase">phase</a><span>, in § 2</span>
   <li><a href="#propagation-path">propagation path</a><span>, in § 2</span>
   <li><a href="#target-phase">target phase</a><span>, in § 2</span>
   <li><a href="#user-agent">user agent</a><span>, in § 2</span>
   <li><a href="#window">Window</a><span>, in § 2</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSS-DISPLAY-4]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="cc682c89">root element</span>
    </ul>
   <li>
    <a data-link-type="biblio">[DOM]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="85394472">Document</span>
     <li><span class="dfn-paneled" id="129bdae8">Event</span>
     <li><span class="dfn-paneled" id="d30f4c38">EventListener</span>
     <li><span class="dfn-paneled" id="0c0ceb78">bubbles</span>
     <li><span class="dfn-paneled" id="8c407366">cancelable</span>
     <li><span class="dfn-paneled" id="0d1c69e7">createEvent(interface)</span>
     <li><span class="dfn-paneled" id="5ca8693f">currentTarget</span>
     <li><span class="dfn-paneled" id="1777dcd2">defaultPrevented</span>
     <li><span class="dfn-paneled" id="a96ca14a">dispatchEvent(event)</span>
     <li><span class="dfn-paneled" id="d9482602">handleEvent(event)</span>
     <li><span class="dfn-paneled" id="e464d43e">initEvent(type)</span>
     <li><span class="dfn-paneled" id="838900a7">isTrusted</span>
     <li><span class="dfn-paneled" id="fefe0433">preventDefault()</span>
     <li><span class="dfn-paneled" id="aef6885c">stopPropagation()</span>
     <li><span class="dfn-paneled" id="e8478f36">target</span>
    </ul>
   <li>
    <a data-link-type="biblio">[UIEVENTS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="216d0c36">EventModifierInit</span>
     <li><span class="dfn-paneled" id="1fc098b2">KeyboardEvent</span>
     <li><span class="dfn-paneled" id="c3469cd0">MouseEvent</span>
     <li><span class="dfn-paneled" id="e8f9a06f">getModifierState(keyArg) <small>(for KeyboardEvent)</small></span>
     <li><span class="dfn-paneled" id="cedb5c60">getModifierState(keyArg) <small>(for MouseEvent)</small></span>
     <li><span class="dfn-paneled" id="1b33fddd">key</span>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBDRIVER-BIDI]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="c219e85e">event type</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-css-display-4">[CSS-DISPLAY-4]
   <dd>CSS Display Module Level 4 URL: <a href="https://drafts.csswg.org/css-display-4/">https://drafts.csswg.org/css-display-4/</a>
   <dt id="biblio-dom">[DOM]
   <dd>Anne van Kesteren. <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/html/wg/drafts/html/master/"><cite>HTML5</cite></a>. URL: <a href="https://www.w3.org/html/wg/drafts/html/master/">https://www.w3.org/html/wg/drafts/html/master/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://datatracker.ietf.org/doc/html/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. March 1997. Best Current Practice. URL: <a href="https://datatracker.ietf.org/doc/html/rfc2119">https://datatracker.ietf.org/doc/html/rfc2119</a>
   <dt id="biblio-uievents">[UIEVENTS]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents/"><cite>UI Events</cite></a>. URL: <a href="https://w3c.github.io/uievents/">https://w3c.github.io/uievents/</a>
   <dt id="biblio-webdriver-bidi">[WEBDRIVER-BIDI]
   <dd>WebDriver BiDi URL: <a href="https://w3c.github.io/webdriver-bidi/">https://w3c.github.io/webdriver-bidi/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-dom-level-3-core">[DOM-Level-3-Core]
   <dd>Arnaud Le Hors; et al. <a href="https://www.w3.org/TR/DOM-Level-3-Core/"><cite>Document Object Model (DOM) Level 3 Core Specification</cite></a>. 28 September 2021. REC. URL: <a href="https://www.w3.org/TR/DOM-Level-3-Core/">https://www.w3.org/TR/DOM-Level-3-Core/</a>
   <dt id="biblio-uievents-key">[UIEvents-Key]
   <dd>Gary Kacmarcik; Travis Leithead. <a href="https://w3c.github.io/uievents-key/"><cite>UI Events KeyboardEvent key Values</cite></a>. URL: <a href="https://w3c.github.io/uievents-key/">https://w3c.github.io/uievents-key/</a>
  </dl>
<script>/* script-dfn-panel */
"use strict";
{
    const dfnsJson = window.dfnsJson || {};

    function genDfnPanel({dfnID, url, dfnText, refSections, external}) {
        return mk.aside({
            class: "dfn-panel",
            id: `infopanel-for-${dfnID}`,
            "data-for": dfnID,
            "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
            },
            mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
                `Info about the '${dfnText}' ${external?"external":""} reference.`),
            mk.a({href:url}, url),
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({
                                    href: `#${ref.id}`
                                    },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        );
    }

    function genAllDfnPanels() {
        for(const panelData of Object.values(window.dfnpanelData)) {
            const dfnID = panelData.dfnID;
            const dfn = document.getElementById(dfnID);
            if(!dfn) {
                console.log(`Can't find dfn#${dfnID}.`, panelData);
            } else {
                const panel = genDfnPanel(panelData);
                append(document.body, panel);
                insertDfnPopupAction(dfn, panel)
            }
        }
    }

    document.addEventListener("DOMContentLoaded", ()=>{
        genAllDfnPanels();

        // Add popup behavior to all dfns to show the corresponding dfn-panel.
        var dfns = queryAll('.dfn-paneled');
        for(let dfn of dfns) { ; }

        document.body.addEventListener("click", (e) => {
            // If not handled already, just hide all dfn panels.
            hideAllDfnPanels();
        });
    })


    function hideAllDfnPanels() {
        // Turn off any currently "on" or "activated" panels.
        queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>hideDfnPanel(el));
    }

    function showDfnPanel(dfnPanel, dfn) {
        hideAllDfnPanels(); // Only display one at this time.
        dfn.setAttribute("aria-expanded", "true");
        dfnPanel.classList.add("on");
        dfnPanel.style.left = "5px";
        dfnPanel.style.top = "0px";
        const panelRect = dfnPanel.getBoundingClientRect();
        const panelWidth = panelRect.right - panelRect.left;
        if (panelRect.right > document.body.scrollWidth) {
            // Panel's overflowing the screen.
            // Just drop it below the dfn and flip it rightward instead.
            // This still wont' fix things if the screen is *really* wide,
            // but fixing that's a lot harder without 'anchor()'.
            dfnPanel.style.top = "1.5em";
            dfnPanel.style.left = "auto";
            dfnPanel.style.right = "0px";
        }
    }

    function pinDfnPanel(dfnPanel) {
        // Switch it to "activated" state, which pins it.
        dfnPanel.classList.add("activated");
        dfnPanel.style.left = null;
        dfnPanel.style.top = null;
    }

    function hideDfnPanel(dfnPanel, dfn) {
        if(!dfn) {
            dfn = document.getElementById(dfnPanel.getAttribute("data-for"));
        }
        dfn.setAttribute("aria-expanded", "false")
        dfnPanel.classList.remove("on");
        dfnPanel.classList.remove("activated");
    }

    function toggleDfnPanel(dfnPanel, dfn) {
        if(dfnPanel.classList.contains("on")) {
            hideDfnPanel(dfnPanel, dfn);
        } else {
            showDfnPanel(dfnPanel, dfn);
        }
    }

    function insertDfnPopupAction(dfn, dfnPanel) {
        // Find dfn panel
        const panelWrapper = document.createElement('span');
        panelWrapper.appendChild(dfnPanel);
        panelWrapper.style.position = "relative";
        panelWrapper.style.height = "0px";
        dfn.insertAdjacentElement("afterend", panelWrapper);
        dfn.setAttribute('role', 'button');
        dfn.setAttribute('aria-expanded', 'false')
        dfn.tabIndex = 0;
        dfn.classList.add('has-dfn-panel');
        dfn.addEventListener('click', (event) => {
            showDfnPanel(dfnPanel, dfn);
            event.stopPropagation();
        });
        dfn.addEventListener('keypress', (event) => {
            const kc = event.keyCode;
            // 32->Space, 13->Enter
            if(kc == 32 || kc == 13) {
                toggleDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        });

        dfnPanel.addEventListener('click', (event) => {
            if (event.target.nodeName == 'A') {
                pinDfnPanel(dfnPanel);
            }
            event.stopPropagation();
        });

        dfnPanel.addEventListener('keydown', (event) => {
            if(event.keyCode == 27) { // Escape key
                hideDfnPanel(dfnPanel, dfn);
                event.stopPropagation();
                event.preventDefault();
            }
        })
    }
}
</script>
<script>/* script-dfn-panel-json */
window.dfnpanelData = {};
window.dfnpanelData['cc682c89'] = {"dfnID": "cc682c89", "url": "https://drafts.csswg.org/css-display-4/#root-element", "dfnText": "root element", "refSections": [{"refs": [{"id": "ref-for-root-element"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['85394472'] = {"dfnID": "85394472", "url": "https://dom.spec.whatwg.org/#document", "dfnText": "Document", "refSections": [{"refs": [{"id": "ref-for-document"}, {"id": "ref-for-document\u2460"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['129bdae8'] = {"dfnID": "129bdae8", "url": "https://dom.spec.whatwg.org/#event", "dfnText": "Event", "refSections": [{"refs": [{"id": "ref-for-event"}, {"id": "ref-for-event\u2460"}, {"id": "ref-for-event\u2461"}, {"id": "ref-for-event\u2462"}, {"id": "ref-for-event\u2463"}, {"id": "ref-for-event\u2464"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['d30f4c38'] = {"dfnID": "d30f4c38", "url": "https://dom.spec.whatwg.org/#callbackdef-eventlistener", "dfnText": "EventListener", "refSections": [{"refs": [{"id": "ref-for-callbackdef-eventlistener"}, {"id": "ref-for-callbackdef-eventlistener\u2460"}, {"id": "ref-for-callbackdef-eventlistener\u2461"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['0c0ceb78'] = {"dfnID": "0c0ceb78", "url": "https://dom.spec.whatwg.org/#dom-event-bubbles", "dfnText": "bubbles", "refSections": [{"refs": [{"id": "ref-for-dom-event-bubbles"}], "title": "1.1. Event dispatch and DOM event flow"}], "external": true};
window.dfnpanelData['8c407366'] = {"dfnID": "8c407366", "url": "https://dom.spec.whatwg.org/#dom-event-cancelable", "dfnText": "cancelable", "refSections": [{"refs": [{"id": "ref-for-dom-event-cancelable"}], "title": "1.2. Default actions and cancelable events"}], "external": true};
window.dfnpanelData['0d1c69e7'] = {"dfnID": "0d1c69e7", "url": "https://dom.spec.whatwg.org/#dom-document-createevent", "dfnText": "createEvent(interface)", "refSections": [{"refs": [{"id": "ref-for-dom-document-createevent"}], "title": "1.4. Trusted events"}], "external": true};
window.dfnpanelData['5ca8693f'] = {"dfnID": "5ca8693f", "url": "https://dom.spec.whatwg.org/#dom-event-currenttarget", "dfnText": "currentTarget", "refSections": [{"refs": [{"id": "ref-for-dom-event-currenttarget"}, {"id": "ref-for-dom-event-currenttarget\u2460"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['1777dcd2'] = {"dfnID": "1777dcd2", "url": "https://dom.spec.whatwg.org/#dom-event-defaultprevented", "dfnText": "defaultPrevented", "refSections": [{"refs": [{"id": "ref-for-dom-event-defaultprevented"}], "title": "1.2. Default actions and cancelable events"}], "external": true};
window.dfnpanelData['a96ca14a'] = {"dfnID": "a96ca14a", "url": "https://dom.spec.whatwg.org/#dom-eventtarget-dispatchevent", "dfnText": "dispatchEvent(event)", "refSections": [{"refs": [{"id": "ref-for-dom-eventtarget-dispatchevent"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-dom-eventtarget-dispatchevent\u2460"}], "title": "1.2. Default actions and cancelable events"}, {"refs": [{"id": "ref-for-dom-eventtarget-dispatchevent\u2461"}], "title": "1.4. Trusted events"}], "external": true};
window.dfnpanelData['d9482602'] = {"dfnID": "d9482602", "url": "https://dom.spec.whatwg.org/#dom-eventlistener-handleevent", "dfnText": "handleEvent(event)", "refSections": [{"refs": [{"id": "ref-for-dom-eventlistener-handleevent"}, {"id": "ref-for-dom-eventlistener-handleevent\u2460"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['e464d43e'] = {"dfnID": "e464d43e", "url": "https://dom.spec.whatwg.org/#dom-event-initevent", "dfnText": "initEvent(type)", "refSections": [{"refs": [{"id": "ref-for-dom-event-initevent"}], "title": "1.4. Trusted events"}], "external": true};
window.dfnpanelData['838900a7'] = {"dfnID": "838900a7", "url": "https://dom.spec.whatwg.org/#dom-event-istrusted", "dfnText": "isTrusted", "refSections": [{"refs": [{"id": "ref-for-dom-event-istrusted"}, {"id": "ref-for-dom-event-istrusted\u2460"}, {"id": "ref-for-dom-event-istrusted\u2461"}], "title": "1.4. Trusted events"}], "external": true};
window.dfnpanelData['fefe0433'] = {"dfnID": "fefe0433", "url": "https://dom.spec.whatwg.org/#dom-event-preventdefault", "dfnText": "preventDefault()", "refSections": [{"refs": [{"id": "ref-for-dom-event-preventdefault"}, {"id": "ref-for-dom-event-preventdefault\u2460"}], "title": "1.2. Default actions and cancelable events"}, {"refs": [{"id": "ref-for-dom-event-preventdefault\u2461"}], "title": "1.4. Trusted events"}, {"refs": [{"id": "ref-for-dom-event-preventdefault\u2462"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['aef6885c'] = {"dfnID": "aef6885c", "url": "https://dom.spec.whatwg.org/#dom-event-stoppropagation", "dfnText": "stopPropagation()", "refSections": [{"refs": [{"id": "ref-for-dom-event-stoppropagation"}], "title": "1.1. Event dispatch and DOM event flow"}], "external": true};
window.dfnpanelData['e8478f36'] = {"dfnID": "e8478f36", "url": "https://dom.spec.whatwg.org/#dom-event-target", "dfnText": "target", "refSections": [{"refs": [{"id": "ref-for-dom-event-target"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['216d0c36'] = {"dfnID": "216d0c36", "url": "https://w3c.github.io/uievents/#dictdef-eventmodifierinit", "dfnText": "EventModifierInit", "refSections": [{"refs": [{"id": "ref-for-dictdef-eventmodifierinit"}, {"id": "ref-for-dictdef-eventmodifierinit\u2460"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['1fc098b2'] = {"dfnID": "1fc098b2", "url": "https://w3c.github.io/uievents/#keyboardevent", "dfnText": "KeyboardEvent", "refSections": [{"refs": [{"id": "ref-for-keyboardevent"}, {"id": "ref-for-keyboardevent\u2460"}, {"id": "ref-for-keyboardevent\u2461"}, {"id": "ref-for-keyboardevent\u2462"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['c3469cd0'] = {"dfnID": "c3469cd0", "url": "https://w3c.github.io/uievents/#mouseevent", "dfnText": "MouseEvent", "refSections": [{"refs": [{"id": "ref-for-mouseevent"}, {"id": "ref-for-mouseevent\u2460"}, {"id": "ref-for-mouseevent\u2461"}, {"id": "ref-for-mouseevent\u2462"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['e8f9a06f'] = {"dfnID": "e8f9a06f", "url": "https://w3c.github.io/uievents/#dom-keyboardevent-getmodifierstate", "dfnText": "getModifierState(keyArg) (for KeyboardEvent)", "refSections": [{"refs": [{"id": "ref-for-dom-keyboardevent-getmodifierstate"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['cedb5c60'] = {"dfnID": "cedb5c60", "url": "https://w3c.github.io/uievents/#dom-mouseevent-getmodifierstate", "dfnText": "getModifierState(keyArg) (for MouseEvent)", "refSections": [{"refs": [{"id": "ref-for-dom-mouseevent-getmodifierstate"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": true};
window.dfnpanelData['1b33fddd'] = {"dfnID": "1b33fddd", "url": "https://w3c.github.io/uievents/#dom-keyboardevent-key", "dfnText": "key", "refSections": [{"refs": [{"id": "ref-for-dom-keyboardevent-key"}], "title": "1.5. Activation triggers and behavior"}], "external": true};
window.dfnpanelData['c219e85e'] = {"dfnID": "c219e85e", "url": "https://w3c.github.io/webdriver-bidi/#event-event-type", "dfnText": "event type", "refSections": [{"refs": [{"id": "ref-for-event-event-type"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-event-event-type\u2460"}, {"id": "ref-for-event-event-type\u2461"}], "title": "2. Glossary"}], "external": true};
window.dfnpanelData['internal-key-modifier-state'] = {"dfnID": "internal-key-modifier-state", "url": "#internal-key-modifier-state", "dfnText": "internal key modifier state", "refSections": [{"refs": [{"id": "ref-for-internal-key-modifier-state"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": false};
window.dfnpanelData['modifier-key-name'] = {"dfnID": "modifier-key-name", "url": "#modifier-key-name", "dfnText": "key modifier name", "refSections": [{"refs": [{"id": "ref-for-modifier-key-name"}], "title": "1.6. Constructing Mouse and Keyboard Events"}], "external": false};
window.dfnpanelData['activation-behavior'] = {"dfnID": "activation-behavior", "url": "#activation-behavior", "dfnText": "activation behavior", "refSections": [{"refs": [{"id": "ref-for-activation-behavior"}], "title": "1.5. Activation triggers and behavior"}, {"refs": [{"id": "ref-for-activation-behavior\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['activation-trigger'] = {"dfnID": "activation-trigger", "url": "#activation-trigger", "dfnText": "activation trigger", "refSections": [{"refs": [{"id": "ref-for-activation-trigger"}, {"id": "ref-for-activation-trigger\u2460"}, {"id": "ref-for-activation-trigger\u2461"}, {"id": "ref-for-activation-trigger\u2462"}, {"id": "ref-for-activation-trigger\u2463"}], "title": "1.5. Activation triggers and behavior"}, {"refs": [{"id": "ref-for-activation-trigger\u2464"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['bubble-phase'] = {"dfnID": "bubble-phase", "url": "#bubble-phase", "dfnText": "bubbling phase", "refSections": [{"refs": [{"id": "ref-for-bubble-phase"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-bubble-phase\u2460"}, {"id": "ref-for-bubble-phase\u2461"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['capture-phase'] = {"dfnID": "capture-phase", "url": "#capture-phase", "dfnText": "capture phase", "refSections": [{"refs": [{"id": "ref-for-capture-phase"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-capture-phase"}, {"id": "ref-for-capture-phase\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['current-event-target'] = {"dfnID": "current-event-target", "url": "#current-event-target", "dfnText": "current event target", "refSections": [{"refs": [{"id": "ref-for-current-event-target"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-current-event-target\u2460"}, {"id": "ref-for-current-event-target\u2461"}, {"id": "ref-for-current-event-target\u2462"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['default-action'] = {"dfnID": "default-action", "url": "#default-action", "dfnText": "default action", "refSections": [{"refs": [{"id": "ref-for-default-action"}, {"id": "ref-for-default-action\u2460"}, {"id": "ref-for-default-action\u2461"}, {"id": "ref-for-default-action\u2462"}, {"id": "ref-for-default-action\u2463"}, {"id": "ref-for-default-action\u2464"}, {"id": "ref-for-default-action\u2465"}, {"id": "ref-for-default-action\u2466"}, {"id": "ref-for-default-action\u2467"}], "title": "1.2. Default actions and cancelable events"}, {"refs": [{"id": "ref-for-default-action\u2468"}, {"id": "ref-for-default-action\u2460\u24ea"}], "title": "1.4. Trusted events"}, {"refs": [{"id": "ref-for-default-action\u2460\u2460"}, {"id": "ref-for-default-action\u2460\u2461"}, {"id": "ref-for-default-action\u2460\u2462"}, {"id": "ref-for-default-action\u2460\u2463"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['dispatch'] = {"dfnID": "dispatch", "url": "#dispatch", "dfnText": "dispatch", "refSections": [{"refs": [{"id": "ref-for-dispatch"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-dispatch\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['document'] = {"dfnID": "document", "url": "#document", "dfnText": "document", "refSections": [{"refs": [{"id": "ref-for-document\u2461"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['dom-application'] = {"dfnID": "dom-application", "url": "#dom-application", "dfnText": "DOM application", "refSections": [{"refs": [{"id": "ref-for-dom-application"}], "title": "1.2. Default actions and cancelable events"}], "external": false};
window.dfnpanelData['event'] = {"dfnID": "event", "url": "#event", "dfnText": "event", "refSections": [{"refs": [{"id": "ref-for-event\u2465"}, {"id": "ref-for-event\u2466"}, {"id": "ref-for-event\u2467"}, {"id": "ref-for-event\u2468"}, {"id": "ref-for-event\u2460\u24ea"}, {"id": "ref-for-event\u2460\u2460"}, {"id": "ref-for-event\u2460\u2461"}, {"id": "ref-for-event\u2460\u2462"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['event-handler'] = {"dfnID": "event-handler", "url": "#event-handler", "dfnText": "event handler", "refSections": [{"refs": [{"id": "ref-for-event-handler"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['event-listener'] = {"dfnID": "event-listener", "url": "#event-listener", "dfnText": "event listener", "refSections": [{"refs": [{"id": "ref-for-event-listener"}, {"id": "ref-for-event-listener\u2460"}], "title": "1.2. Default actions and cancelable events"}], "external": false};
window.dfnpanelData['event-order'] = {"dfnID": "event-order", "url": "#event-order", "dfnText": "event order", "refSections": [{"refs": [{"id": "ref-for-event-order"}], "title": "1.3. Synchronous and asynchronous events"}], "external": false};
window.dfnpanelData['event-phase'] = {"dfnID": "event-phase", "url": "#event-phase", "dfnText": "event phase", "refSections": [{"refs": [{"id": "ref-for-event-phase"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-event-phase\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['event-target'] = {"dfnID": "event-target", "url": "#event-target", "dfnText": "event target", "refSections": [{"refs": [{"id": "ref-for-event-target"}, {"id": "ref-for-event-target\u2460"}, {"id": "ref-for-event-target\u2461"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-event-target\u2462"}], "title": "1.5. Activation triggers and behavior"}, {"refs": [{"id": "ref-for-event-target\u2463"}, {"id": "ref-for-event-target\u2464"}, {"id": "ref-for-event-target\u2465"}, {"id": "ref-for-event-target\u2466"}, {"id": "ref-for-event-target\u2467"}, {"id": "ref-for-event-target\u2468"}, {"id": "ref-for-event-target\u2460\u24ea"}, {"id": "ref-for-event-target\u2460\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['fire'] = {"dfnID": "fire", "url": "#fire", "dfnText": "fire", "refSections": [{"refs": [{"id": "ref-for-fire"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['host-language'] = {"dfnID": "host-language", "url": "#host-language", "dfnText": "host language", "refSections": [{"refs": [{"id": "ref-for-host-language"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['phase'] = {"dfnID": "phase", "url": "#phase", "dfnText": "phase", "refSections": [{"refs": [{"id": "ref-for-phase"}, {"id": "ref-for-phase\u2460"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['propagation-path'] = {"dfnID": "propagation-path", "url": "#propagation-path", "dfnText": "propagation path", "refSections": [{"refs": [{"id": "ref-for-propagation-path"}, {"id": "ref-for-propagation-path\u2460"}, {"id": "ref-for-propagation-path\u2461"}], "title": "1.1. Event dispatch and DOM event flow"}], "external": false};
window.dfnpanelData['target-phase'] = {"dfnID": "target-phase", "url": "#target-phase", "dfnText": "target phase", "refSections": [{"refs": [{"id": "ref-for-target-phase"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-target-phase\u2460"}, {"id": "ref-for-target-phase\u2461"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['user-agent'] = {"dfnID": "user-agent", "url": "#user-agent", "dfnText": "user agent", "refSections": [{"refs": [{"id": "ref-for-user-agent"}, {"id": "ref-for-user-agent\u2460"}], "title": "1.4. Trusted events"}, {"refs": [{"id": "ref-for-user-agent\u2461"}, {"id": "ref-for-user-agent\u2462"}], "title": "2. Glossary"}], "external": false};
window.dfnpanelData['window'] = {"dfnID": "window", "url": "#window", "dfnText": "Window", "refSections": [{"refs": [{"id": "ref-for-window"}, {"id": "ref-for-window\u2460"}], "title": "1.1. Event dispatch and DOM event flow"}, {"refs": [{"id": "ref-for-window\u2461"}], "title": "2. Glossary"}], "external": false};</script>
<script>/* script-dom-helper */
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>